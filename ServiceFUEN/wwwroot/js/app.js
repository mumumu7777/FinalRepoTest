(function(){"use strict";var t={9549:function(t,e,o){var n=o(9963),a=o(6252);const s={id:"app"};function r(t,e,o,n,r,c){const l=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a.Wm)(l)])}var c={name:"App",components:{},methods:{}},l=o(3744);const i=(0,l.Z)(c,[["render",r]]);var d=i,u=o(2201),p=o(8433),f=o(3577);const m=t=>((0,a.dD)("data-v-28db3500"),t=t(),(0,a.Cn)(),t),h={class:"row mx-auto"},v={class:"product-card row"},g={class:"col-12"},b={class:"col-12"},w={class:"col-12"},S=["onClick"],y=m((()=>(0,a._)("br",null,null,-1))),C={class:"mt-5"};function x(t,e,o,s,r,c){const l=(0,a.up)("ShoppingCart"),i=(0,a.up)("router-link"),d=(0,a.up)("loading"),u=(0,a.up)("Layout01");return(0,a.wg)(),(0,a.j4)(u,null,{contents:(0,a.w5)((()=>[(0,a.Wm)(l,{ref:"shoppingCart"},null,512),(0,a._)("div",h,[(0,a._)("div",{class:(0,f.C_)(["text-center",c.customClass()])},"商品:",2),(0,a._)("div",null,[(0,a.Uk)(" 搜尋: "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>r.searchText=t)},null,512),[[n.nr,r.searchText]]),(0,a._)("button",{class:"pointer",onClick:e[1]||(e[1]=t=>c.search())},"搜尋結果")]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.products,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a._)("div",v,[(0,a._)("div",g,"編號: "+(0,f.zw)(e+1),1),(0,a._)("div",b,"商品名稱: "+(0,f.zw)(t.name),1),(0,a._)("div",w,"商品價格: "+(0,f.zw)(t.price),1),(0,a._)("button",{class:"col-1 btn btn-danger pointer",onClick:e=>c.addToCart(t,3)}," 加入一個 ",8,S),y])])))),128)),(0,a._)("div",C,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.cartsSelect,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a._)("div",null,"商品名稱: "+(0,f.zw)(t.name)+" 數量: "+(0,f.zw)(t.qty),1)])))),128))]),(0,a.Wm)(i,{to:r.notFoundLink},{default:(0,a.w5)((()=>[(0,a.Uk)("購物車")])),_:1},8,["to"])]),(0,a.Wm)(d,{active:r.loading},null,8,["active"])])),_:1})}o(7658);var _={data(){return{notFoundLink:"/notfound",headers:{},products:null,searchText:"",loading:!1}},setup(){const t=(0,u.tv)(),e=((0,u.yj)(),()=>{t.push("/notfound")});return{toNotFound:e}},mounted(){this.GetProducts()},methods:{goNotFound(){this.toNotFound()},customClass(){return"test"},search(){alert(this.searchText)},async GetProducts(){await this.$axios.get("api/ShoppingCart/GetProducts").then((t=>{t.data&&(this.products=t.data.data,console.log(this.products))})).catch((t=>{console.log(err.response.data)}))},async addToCart(t,e){this.$refs.shoppingCart.addToCart(t,e)}},components:{}};const k=(0,l.Z)(_,[["render",x],["__scopeId","data-v-28db3500"]]);var T=k;const B={class:"test123"};function O(t,e,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",B,"Not Found 404")}var P={name:"NotFound"};const I=(0,l.Z)(P,[["render",O]]);var $=I;p.Z.defaults.baseURL="/";const j=[{path:"/",redirect:"/homepage"},{path:"/homepage",component:T,name:"homepage"},{path:"/:pathMatch(.*)*",name:"NotFound",component:$,props:t=>t.params}],D=(0,u.p7)({history:(0,u.PO)(),routes:j});D.afterEach(((t,e)=>{let o=document.body.scrollTop;if(0!==o)return void(document.body.scrollTop=0);let n=document.documentElement.scrollTop;0!==n&&(document.documentElement.scrollTop=0)}));var F=D,N=(o(8877),o(3636)),L=o(7810),A=o(9417),M=o(3982),W=o.n(M),Q=o(2369),Z=o.n(Q);const z=t=>((0,a.dD)("data-v-3c5e901a"),t=t(),(0,a.Cn)(),t),U={class:"container-fluid layout01 px-0"},E=z((()=>(0,a._)("div",{class:"header w-100"},"網頁Header",-1))),G=z((()=>(0,a._)("div",{class:"footer w-100"},"網頁Footer",-1)));function H(t,e,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",U,[E,(0,a.WI)(t.$slots,"contents",{class:"body w-100"},void 0,!0),G])}var K={components:{}};const Y=(0,l.Z)(K,[["render",H],["__scopeId","data-v-3c5e901a"]]);var V=Y;const q=t=>((0,a.dD)("data-v-fe501a00"),t=t(),(0,a.Cn)(),t),J={class:"row d-flex justify-content-center align-items-center h-100 w-75 mt-5 mx-auto"},R={class:"col-10"},X=(0,a.uE)('<div class="d-flex justify-content-between align-items-center mb-4" data-v-fe501a00><h3 class="fw-normal mb-0 text-black" data-v-fe501a00>Shopping Cart</h3><div data-v-fe501a00><p class="mb-0" data-v-fe501a00><span class="text-muted" data-v-fe501a00>Sort by:</span><a class="text-body" data-v-fe501a00>price <i class="fas fa-angle-down mt-1" data-v-fe501a00></i></a></p></div></div>',1),tt={class:"card rounded-3 mb-4"},et={class:"card-body p-4"},ot=q((()=>(0,a._)("div",{class:"col-md-2 col-lg-2 col-xl-2"},[(0,a._)("img",{src:"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-shopping-carts/img1.webp",class:"img-fluid rounded-3",alt:"Cotton T-shirt"})],-1))),nt={class:"col-md-3 col-lg-3 col-xl-3"},at={class:"lead fw-normal mb-2"},st={class:"col-md-3 col-lg-3 col-xl-2 d-flex"},rt={class:"btn btn-link px-2 pointer"},ct=["onUpdate:modelValue","onBlur"],lt={class:"btn btn-link px-2 pointer"},it={class:"col-md-3 col-lg-2 col-xl-2 offset-lg-1"},dt={class:"mb-0"},ut={class:"col-md-1 col-lg-1 col-xl-1 text-end pointer"},pt=["onClick"],ft=(0,a.uE)('<div class="card mb-4" data-v-fe501a00><div class="card-body p-4 d-flex flex-row" data-v-fe501a00><div class="form-outline flex-fill" data-v-fe501a00><input type="text" id="form1" class="form-control form-control-lg" data-v-fe501a00><label class="form-label" for="form1" data-v-fe501a00>Discound code</label></div><button type="button" class="btn btn-outline-warning btn-lg ms-3" data-v-fe501a00> Apply </button></div></div>',1),mt={class:"card"},ht={class:"card-body"};function vt(t,e,o,s,r,c){const l=(0,a.up)("font-awesome-icon"),i=(0,a.up)("loading");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",J,[(0,a._)("div",R,[X,(0,a._)("div",tt,[(0,a._)("div",et,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.cartsSelect,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"row mt-3 d-flex justify-content-between align-items-center",key:t.Id},[ot,(0,a._)("div",nt,[(0,a._)("p",at,(0,f.zw)(t.Name),1)]),(0,a._)("div",st,[(0,a._)("button",rt,[(0,a.Wm)(l,{icon:"fas fa-minus",onClick:(0,n.iM)((o=>c.addToCart(t,1,`.count-input-${e}`)),["stop"])},null,8,["onClick"])]),(0,a.wy)((0,a._)("input",{class:(0,f.C_)(["form-control form-control-sm",`count-input-${e}`]),min:"0",default:"1","onUpdate:modelValue":e=>t.Qty=e,type:"number",onBlur:(0,n.iM)((o=>c.addToCart(t,2,`.count-input-${e}`)),["stop"])},null,42,ct),[[n.nr,t.Qty]]),(0,a._)("button",lt,[(0,a.Wm)(l,{icon:"fas fa-plus",onClick:(0,n.iM)((o=>c.addToCart(t,0,`.count-input-${e}`)),["stop"])},null,8,["onClick"])])]),(0,a._)("div",it,[(0,a._)("h5",dt,"$"+(0,f.zw)(t.Price*t.Qty),1)]),(0,a._)("div",ut,[(0,a._)("a",{class:"text-danger",onClick:(0,n.iM)((e=>c.removeCartItem(t)),["stop"])},[(0,a.Wm)(l,{icon:"fas fa-trash"})],8,pt)])])))),128))])]),ft,(0,a._)("div",mt,[(0,a._)("div",ht,[(0,a._)("button",{type:"button",class:"btn btn-warning btn-block btn-lg pointer",onClick:e[0]||(e[0]=(0,n.iM)(((...t)=>c.cartSubmit&&c.cartSubmit(...t)),["stop"]))}," Proceed to Pay ")])])])]),(0,a.Wm)(i,{active:r.loading},null,8,["active"])],64)}var gt={data(){return{notFoundLink:"/notfound",headers:{},products:null,cartsSelect:[],searchText:"",loading:!1,delSweetConfirm:{title:"要刪除此項目嗎",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ff7674",cancelButtonColor:"#777",confirmButtonText:"刪除",cancelButtonText:"取消"},buySweetConfirm:{title:"確定要購買嗎",icon:"warning",showCancelButton:!0,confirmButtonColor:"#41b882",cancelButtonColor:"#777",confirmButtonText:"購買",cancelButtonText:"取消"},successSweetAlert:{title:"成功",icon:"success",confirmButtonText:"確定",confirmButtonColor:"#41b882"},errSweetAlert:{title:"錯誤",icon:"error",confirmButtonText:"確定",confirmButtonColor:"#41b882"}}},setup(){const t=(0,u.tv)(),e=((0,u.yj)(),()=>{t.push("/notfound")});return{toNotFound:e}},mounted(){this.getStorageCart()},methods:{saveLocalStorage(t,e){localStorage.setItem(t,JSON.stringify(e))},getlocalStorage(t){this[t]=JSON.parse(localStorage.getItem(t))},goNotFound(){this.toNotFound()},customClass(){return"test"},search(){alert(this.searchText)},async GetProducts(){await this.$axios.get("api/ShoppingCart/GetProducts").then((t=>{t.data&&(this.products=t.data.data,console.log(this.products))})).catch((t=>{console.log(err.response.data)}))},getStorageCart(){this.getlocalStorage("cartsSelect"),this.cartsSelect||(this.cartsSelect=[])},rmStorageCart(){localStorage.removeItem("cartsSelect"),this.cartsSelect=[]},async addToCart(t,e,o){if(3!=e){let n=document.querySelector(o),a=n.value,s=this.cartsSelect.indexOf(t);if(console.log("findIndex",s),console.log("input",n),console.log("count",a),1==e&&1==a)return void this.removeCartItem(t);if(2==e&&0==a)return void this.removeCartItem(t,!0);switch(e){case 0:this.cartsSelect[s].Qty++;break;case 1:this.cartsSelect[s].Qty--;break;case 2:this.cartsSelect[s].Qty=a;break}this.saveLocalStorage("cartsSelect",this.cartsSelect)}else{let e=this.cartsSelect.find((e=>e.Id==t.id));if(console.log("findProduct add",e),e){let t=this.cartsSelect.indexOf(e);this.cartsSelect[t].Qty++}else this.cartsSelect.push({Id:t.id,Qty:1,Name:t.name,Price:t.price});this.saveLocalStorage("cartsSelect",this.cartsSelect)}console.log(this.cartsSelect)},async removeCartItem(t,e){let o=this.cartsSelect.indexOf(t);o>-1&&this.$swal.fire(this.delSweetConfirm).then((t=>{t.isConfirmed?(this.cartsSelect.splice(o,1),this.saveLocalStorage("cartsSelect",this.cartsSelect)):e&&this.getlocalStorage("cartsSelect")}))},async cartSubmit(){await this.$swal.fire(this.buySweetConfirm).then((t=>{if(t.isConfirmed){let t={MemberId:1,State:0,CartProducts:Array.from(this.cartsSelect)};this.loading=!0,this.$axios.post("api/ShoppingCart/SaveShoppingCart",t).then((t=>{204!=t.status&&200!=t.status||null!==t.data&void 0!==t.data&&(this.successSweetAlert.text=t.data.messsage,this.$swal.fire(this.successSweetAlert),this.successSweetAlert.text="",this.rmStorageCart(),this.loading=!1)})).catch((t=>{console.log(t.response.data),this.errSweetAlert.text=t.response.data.messsage||"其他錯誤",this.$swal.fire(this.errSweetAlert),this.errSweetAlert.text="",this.loading=!1}))}}))}},components:{}};const bt=(0,l.Z)(gt,[["render",vt],["__scopeId","data-v-fe501a00"]]);var wt=bt;N.vI.add(A.BC0,A.wp6,A.r8p,A.Kl4,A.$aW);const St={confirmButtonColor:"#41b882",cancelButtonColor:"#ff7674"},yt=(0,n.ri)(d);yt.component("font-awesome-icon",L.GN).component("Loading",Z()).component("Layout01",V).component("ShoppingCart",wt).use(W(),St).use(F).mount("#app"),p.Z.defaults.baseURL="/",yt.config.globalProperties.$axios=p.Z}},e={};function o(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,o),s.exports}o.m=t,function(){var t=[];o.O=function(e,n,a,s){if(!n){var r=1/0;for(d=0;d<t.length;d++){n=t[d][0],a=t[d][1],s=t[d][2];for(var c=!0,l=0;l<n.length;l++)(!1&s||r>=s)&&Object.keys(o.O).every((function(t){return o.O[t](n[l])}))?n.splice(l--,1):(c=!1,s<r&&(r=s));if(c){t.splice(d--,1);var i=a();void 0!==i&&(e=i)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[n,a,s]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,s,r=n[0],c=n[1],l=n[2],i=0;if(r.some((function(e){return 0!==t[e]}))){for(a in c)o.o(c,a)&&(o.m[a]=c[a]);if(l)var d=l(o)}for(e&&e(n);i<r.length;i++)s=r[i],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(d)},n=self["webpackChunkvuetest"]=self["webpackChunkvuetest"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(9549)}));n=o.O(n)})();