(function(){"use strict";var t={5422:function(t,e,n){var o=n(9963),a=n(6252);const r={id:"app"};function i(t,e,n,o,i,s){const c=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(c)])}var s={name:"App",components:{},methods:{}},c=n(3744);const l=(0,c.Z)(s,[["render",i]]);var d=l,u=n(2201),m=n(8433),p=n(3577);const h=t=>((0,a.dD)("data-v-224c39b0"),t=t(),(0,a.Cn)(),t),f={class:"row mx-auto"},v={class:"product-card row"},g={class:"col-12"},y={class:"col-12"},b={class:"col-12"},w=["onClick"],S=h((()=>(0,a._)("br",null,null,-1))),C={class:"mt-5"};function x(t,e,n,r,i,s){const c=(0,a.up)("ShoppingCart"),l=(0,a.up)("router-link"),d=(0,a.up)("loading"),u=(0,a.up)("Layout01");return(0,a.wg)(),(0,a.j4)(u,null,{contents:(0,a.w5)((()=>[(0,a.Wm)(c,{ref:"shoppingCart"},null,512),(0,a._)("div",f,[(0,a._)("div",{class:(0,p.C_)(["text-center",s.customClass()])},"商品:",2),(0,a._)("div",null,[(0,a.Uk)(" 搜尋: "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>i.searchText=t)},null,512),[[o.nr,i.searchText]]),(0,a._)("button",{class:"pointer",onClick:e[1]||(e[1]=t=>s.search())},"搜尋結果")]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.products,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a._)("div",v,[(0,a._)("div",g,"編號: "+(0,p.zw)(e+1),1),(0,a._)("div",y,"商品名稱: "+(0,p.zw)(t.name),1),(0,a._)("div",b,"商品價格: "+(0,p.zw)(t.price),1),(0,a._)("button",{class:"col-1 btn btn-danger pointer",onClick:e=>s.addToCart(t,3)}," 加入一個 ",8,w),S])])))),128)),(0,a._)("div",C,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.cartsSelect,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a._)("div",null,"商品名稱: "+(0,p.zw)(t.name)+" 數量: "+(0,p.zw)(t.qty),1)])))),128))]),(0,a.Wm)(l,{to:i.notFoundLink},{default:(0,a.w5)((()=>[(0,a.Uk)("購物車")])),_:1},8,["to"])]),(0,a.Wm)(d,{active:i.loading},null,8,["active"])])),_:1})}n(7658);var _={data(){return{notFoundLink:"/notfound",headers:{},products:null,searchText:"",loading:!1}},setup(){const t=(0,u.tv)(),e=((0,u.yj)(),()=>{t.push("/notfound")});return{toNotFound:e}},mounted(){this.GetProducts()},methods:{goNotFound(){this.toNotFound()},customClass(){return"test"},search(){alert(this.searchText)},async GetProducts(){await this.$axios.get("api/ShoppingCart/GetProducts").then((t=>{t.data&&(this.products=t.data.data,console.log(this.products))})).catch((t=>{console.log(err.response.data)}))},async addToCart(t,e){this.$refs.shoppingCart.addToCart(t,e)}},components:{}};const k=(0,c.Z)(_,[["render",x],["__scopeId","data-v-224c39b0"]]);var $=k;function T(t,e,n,o,r,i){const s=(0,a.up)("loading"),c=(0,a.up)("Layout01");return(0,a.wg)(),(0,a.j4)(c,null,{contents:(0,a.w5)((()=>[(0,a.Uk)(" 此頁為結帳結果頁，將綠界交易資訊傳回顯示 "),(0,a.Wm)(s,{active:r.loading},null,8,["active"])])),_:1})}var P={data(){return{notFoundLink:"/notfound",loading:!1,trendModels:null,errSweetAlert:{title:"錯誤",icon:"error",confirmButtonText:"確定",confirmButtonColor:"#41b882"},successSweetAlert:{title:"成功",icon:"success",confirmButtonText:"確定",confirmButtonColor:"#41b882"}}},setup(){const t=(0,u.tv)(),e=((0,u.yj)(),()=>{t.push("/homepage")});return{toHomePage:e}},methods:{},components:{}};const F=(0,c.Z)(P,[["render",T]]);var I=F;const L={class:"test123"};function B(t,e,n,o,r,i){return(0,a.wg)(),(0,a.iD)("div",L,"Not Found 404")}var D={name:"NotFound"};const M=(0,c.Z)(D,[["render",B]]);var O=M;m.Z.defaults.baseURL="/";const U=[{path:"/",redirect:"/homepage"},{path:"/homepage",component:$,name:"homepage"},{path:"/checkoutreport",component:I,name:"checkoutreport"},{path:"/:pathMatch(.*)*",name:"NotFound",component:O,props:t=>t.params}],N=(0,u.p7)({history:(0,u.PO)(),routes:U});N.afterEach(((t,e)=>{let n=document.body.scrollTop;if(0!==n)return void(document.body.scrollTop=0);let o=document.documentElement.scrollTop;0!==o&&(document.documentElement.scrollTop=0)}));var R=N,j=(n(8877),n(3636)),A=n(7810),E=n(9417),W=n(3982),Z=n.n(W),H=n(2369),Q=n.n(H);const z=t=>((0,a.dD)("data-v-09001833"),t=t(),(0,a.Cn)(),t),V={class:"container-fluid layout01 px-0"},G=z((()=>(0,a._)("div",{class:"header w-100"},"網頁Header",-1))),K=z((()=>(0,a._)("div",{class:"footer w-100"},"網頁Footer",-1)));function Y(t,e,n,o,r,i){return(0,a.wg)(),(0,a.iD)("div",V,[G,(0,a.WI)(t.$slots,"contents",{class:"body w-100"},void 0,!0),K])}var q={components:{}};const J=(0,c.Z)(q,[["render",Y],["__scopeId","data-v-09001833"]]);var X=J;const tt=t=>((0,a.dD)("data-v-f13955de"),t=t(),(0,a.Cn)(),t),et={class:"row d-flex justify-content-center align-items-center h-100 w-75 mt-5 mx-auto"},nt={class:"col-10"},ot=(0,a.uE)('<div class="d-flex justify-content-between align-items-center mb-4" data-v-f13955de><h3 class="fw-normal mb-0 text-black" data-v-f13955de>Shopping Cart</h3><div data-v-f13955de><p class="mb-0" data-v-f13955de><span class="text-muted" data-v-f13955de>Sort by:</span><a class="text-body" data-v-f13955de>price <i class="fas fa-angle-down mt-1" data-v-f13955de></i></a></p></div></div>',1),at={class:"card rounded-3 mb-4"},rt={class:"card-body p-4"},it=tt((()=>(0,a._)("div",{class:"col-md-2 col-lg-2 col-xl-2"},[(0,a._)("img",{src:"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-shopping-carts/img1.webp",class:"img-fluid rounded-3",alt:"Cotton T-shirt"})],-1))),st={class:"col-md-3 col-lg-3 col-xl-3"},ct={class:"lead fw-normal mb-2"},lt={class:"col-md-3 col-lg-3 col-xl-2 d-flex"},dt={class:"btn btn-link px-2 pointer"},ut=["onUpdate:modelValue","onBlur"],mt={class:"btn btn-link px-2 pointer"},pt={class:"col-md-3 col-lg-2 col-xl-2 offset-lg-1"},ht={class:"mb-0"},ft={class:"col-md-1 col-lg-1 col-xl-1 text-end pointer"},vt=["onClick"],gt=(0,a.uE)('<div class="card mb-4" data-v-f13955de><div class="card-body p-4 d-flex flex-row" data-v-f13955de><div class="form-outline flex-fill" data-v-f13955de><input type="text" id="form1" class="form-control form-control-lg" data-v-f13955de><label class="form-label" for="form1" data-v-f13955de>Discound code</label></div><button type="button" class="btn btn-outline-warning btn-lg ms-3" data-v-f13955de> Apply </button></div></div>',1),yt={class:"card"},bt={class:"card-body"},wt=["innerHTML"];function St(t,e,n,r,i,s){const c=(0,a.up)("font-awesome-icon"),l=(0,a.up)("loading");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",et,[(0,a._)("div",nt,[ot,(0,a._)("div",at,[(0,a._)("div",rt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.cartsSelect,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"row mt-3 d-flex justify-content-between align-items-center",key:t.Id},[it,(0,a._)("div",st,[(0,a._)("p",ct,(0,p.zw)(t.Name),1)]),(0,a._)("div",lt,[(0,a._)("button",dt,[(0,a.Wm)(c,{icon:"fas fa-minus",onClick:(0,o.iM)((n=>s.addToCart(t,1,`.count-input-${e}`)),["stop"])},null,8,["onClick"])]),(0,a.wy)((0,a._)("input",{class:(0,p.C_)(["form-control form-control-sm",`count-input-${e}`]),min:"0",default:"1","onUpdate:modelValue":e=>t.Qty=e,type:"number",onBlur:(0,o.iM)((n=>s.addToCart(t,2,`.count-input-${e}`)),["stop"])},null,42,ut),[[o.nr,t.Qty]]),(0,a._)("button",mt,[(0,a.Wm)(c,{icon:"fas fa-plus",onClick:(0,o.iM)((n=>s.addToCart(t,0,`.count-input-${e}`)),["stop"])},null,8,["onClick"])])]),(0,a._)("div",pt,[(0,a._)("h5",ht,"$"+(0,p.zw)(t.Price*t.Qty),1)]),(0,a._)("div",ft,[(0,a._)("a",{class:"text-danger",onClick:(0,o.iM)((e=>s.removeCartItem(t)),["stop"])},[(0,a.Wm)(c,{icon:"fas fa-trash"})],8,vt)])])))),128))])]),gt,(0,a._)("div",yt,[(0,a._)("div",bt,[(0,a._)("button",{type:"button",class:"btn btn-warning btn-block btn-lg pointer",onClick:e[0]||(e[0]=(0,o.iM)(((...t)=>s.cartSubmit&&s.cartSubmit(...t)),["stop"]))}," Proceed to Pay ")])])])]),(0,a._)("div",{innerHTML:i.paymentForm},null,8,wt),(0,a.Wm)(l,{active:i.loading},null,8,["active"])],64)}var Ct={data(){return{notFoundLink:"/notfound",headers:{},products:null,cartsSelect:[],searchText:"",paymentForm:"",loading:!1,delSweetConfirm:{title:"要刪除此項目嗎",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ff7674",cancelButtonColor:"#777",confirmButtonText:"刪除",cancelButtonText:"取消"},buySweetConfirm:{title:"確定要購買嗎",icon:"warning",showCancelButton:!0,confirmButtonColor:"#41b882",cancelButtonColor:"#777",confirmButtonText:"購買",cancelButtonText:"取消"},successSweetAlert:{title:"成功",icon:"success",confirmButtonText:"確定",confirmButtonColor:"#41b882"},errSweetAlert:{title:"錯誤",icon:"error",confirmButtonText:"確定",confirmButtonColor:"#41b882"}}},setup(){const t=(0,u.tv)(),e=((0,u.yj)(),()=>{t.push("/notfound")});return{toNotFound:e}},mounted(){this.getStorageCart()},methods:{saveLocalStorage(t,e){localStorage.setItem(t,JSON.stringify(e))},getlocalStorage(t){this[t]=JSON.parse(localStorage.getItem(t))},goNotFound(){this.toNotFound()},getStorageCart(){this.getlocalStorage("cartsSelect"),this.cartsSelect||(this.cartsSelect=[])},rmStorageCart(){localStorage.removeItem("cartsSelect"),this.cartsSelect=[]},async addToCart(t,e,n){if(3!=e){let o=document.querySelector(n),a=o.value,r=this.cartsSelect.indexOf(t);if(console.log("findIndex",r),console.log("input",o),console.log("count",a),1==e&&1==a)return void this.removeCartItem(t);if(2==e&&0==a)return void this.removeCartItem(t,!0);switch(e){case 0:this.cartsSelect[r].Qty++;break;case 1:this.cartsSelect[r].Qty--;break;case 2:this.cartsSelect[r].Qty=a;break}this.saveLocalStorage("cartsSelect",this.cartsSelect)}else{let e=this.cartsSelect.find((e=>e.Id==t.id));if(console.log("findProduct add",e),e){let t=this.cartsSelect.indexOf(e);this.cartsSelect[t].Qty++}else this.cartsSelect.push({Id:t.id,Qty:1,Name:t.name,Price:t.price});this.saveLocalStorage("cartsSelect",this.cartsSelect)}console.log(this.cartsSelect)},async removeCartItem(t,e){let n=this.cartsSelect.indexOf(t);n>-1&&this.$swal.fire(this.delSweetConfirm).then((t=>{t.isConfirmed?(this.cartsSelect.splice(n,1),this.saveLocalStorage("cartsSelect",this.cartsSelect)):e&&this.getlocalStorage("cartsSelect")}))},async cartSubmit(){await this.$swal.fire(this.buySweetConfirm).then((t=>{if(t.isConfirmed){let t={MemberId:1,State:0,CartProducts:Array.from(this.cartsSelect)};this.loading=!0,this.$axios.post("api/ShoppingCart/SaveShoppingCart",t).then((t=>{204!=t.status&&200!=t.status||null!==t.data&void 0!==t.data&&(this.rmStorageCart(),this.successSweetAlert.text=t.data.messsage,this.$swal.fire(this.successSweetAlert),this.successSweetAlert.text="",this.paymentForm=this.buildPaymentForm(t.data.data.formData),this.loading=!1,this.$nextTick((()=>{document.getElementById("payment").submit(),this.paymentForm=""})))})).catch((t=>{console.log(t.response.data),this.errSweetAlert.text=t.response.data.messsage||"其他錯誤",this.$swal.fire(this.errSweetAlert),this.errSweetAlert.text="",this.loading=!1}))}}))},buildPaymentForm(t){let e="";return e+=`<form action="${t.url}" method="post" id="payment">`,e+=`<input type="hidden" name="MerchantID" value="${t.merchantID}"/>`,e+=`<input type="hidden" name="MerchantTradeNo" value="${t.merchantTradeNo}"/>`,e+=`<input type="hidden" name="MerchantTradeDate" value="${t.merchantTradeDate}"/>`,e+=`<input type="hidden" name="PaymentType" value="${t.paymentType}"/>`,e+=`<input type="hidden" name="TotalAmount" value="${t.totalAmount}"/>`,e+=`<input type="hidden" name="TradeDesc" value="${t.tradeDesc}"/>`,e+=`<input type="hidden" name="ItemName" value="${t.itemName}"/>`,e+=`<input type="hidden" name="ReturnURL" value="${t.returnURL}"/>`,e+=`<input type="hidden" name="ChoosePayment" value="${t.choosePayment}"/>`,e+=`<input type="hidden" name="CheckMacValue" value="${t.checkMacValue}"/>`,e+=`<input type="hidden" name="EncryptType" value="${t.encryptType}"/>`,t.storeID&&(e+=`<input type="hidden" name="StoreID" value="${t.storeID}"/>`),t.clientBackURL&&(e+=`<input type="hidden" name="ClientBackURL" value="${t.clientBackURL}"/>`),t.itemURL&&(e+=`<input type="hidden" name="ItemURL" value="${t.itemURL}"/>`),t.remark&&(e+=`<input type="hidden" name="Remark" value="${t.remark}"/>`),t.chooseSubPayment&&(e+=`<input type="hidden" name="ChooseSubPayment" value="${t.chooseSubPayment}"/>`),t.orderResultURL&&(e+=`<input type="hidden" name="OrderResultURL" value="${t.orderResultURL}"/>`),t.needExtraPaidInfo&&(e+=`<input type="hidden" name="NeedExtraPaidInfo" value="${t.needExtraPaidInfo}"/>`),t.ignorePayment&&(e+=`<input type="hidden" name="IgnorePayment" value="${t.ignorePayment}"/>`),t.platformID&&(e+=`<input type="hidden" name="PlatformID" value="${t.platformID}"/>`),t.invoiceMark&&(e+=`<input type="hidden" name="InvoiceMark" value="${t.invoiceMark}"/>`),t.customField1&&(e+=`<input type="hidden" name="CustomField1" value="${t.customField1}"/>`),t.customField2&&(e+=`<input type="hidden" name="CustomField2" value="${t.customField2}"/>`),t.customField3&&(e+=`<input type="hidden" name="CustomField3" value="${t.customField3}"/>`),t.customField4&&(e+=`<input type="hidden" name="CustomField4" value="${t.customField4}"/>`),t.language&&(e+=`<input type="hidden" name="Language" value="${t.language}"/>`),t.unionPay&&(e+=`<input type="hidden" name="UnionPay" value="${t.unionPay}"/>`),e+="</form>",e}},components:{}};const xt=(0,c.Z)(Ct,[["render",St],["__scopeId","data-v-f13955de"]]);var _t=xt,kt=n(2401);j.vI.add(E.BC0,E.wp6,E.r8p,E.Kl4,E.$aW);const $t={confirmButtonColor:"#41b882",cancelButtonColor:"#ff7674"},Tt=(0,o.ri)(d);Tt.component("font-awesome-icon",A.GN).component("Loading",Q()).component("Layout01",X).component("ShoppingCart",_t).use(Z(),$t).use(R).mount("#app").use(kt.Z),m.Z.defaults.baseURL="/",Tt.config.globalProperties.$axios=m.Z}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,o,a,r){if(!o){var i=1/0;for(d=0;d<t.length;d++){o=t[d][0],a=t[d][1],r=t[d][2];for(var s=!0,c=0;c<o.length;c++)(!1&r||i>=r)&&Object.keys(n.O).every((function(t){return n.O[t](o[c])}))?o.splice(c--,1):(s=!1,r<i&&(i=r));if(s){t.splice(d--,1);var l=a();void 0!==l&&(e=l)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[o,a,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,r,i=o[0],s=o[1],c=o[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(c)var d=c(n)}for(e&&e(o);l<i.length;l++)r=i[l],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(d)},o=self["webpackChunkvuetest"]=self["webpackChunkvuetest"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5422)}));o=n.O(o)})();